<div>
    <h1>Compondo escritas em fluxo</h1>

    <pre class="slide-step-1"><code>map</code></pre>
    <svg style="width: 20%" viewBox="-100 0 1000 50">
        <defs>
            <g id="arrow-head">
                <path d="M-20 -20 L0 0 L-20 20"/>
            </g>
            <g id="mini-arrow-head">
                <path d="M-8 -8 L0 0 L-8 8"/>
            </g>
            <g id="future">
                <circle cx="0" cy="0" r="10"/>
            </g>
            <g id="stream">
                <circle cx="0" cy="0" r="10"/>
                <g style="stroke: none; fill: black">
                    <circle cx="9" cy="10" r="2"/>
                    <circle cx="15" cy="10" r="2"/>
                    <circle cx="21" cy="10" r="2"/>
                </g>
            </g>
            <g id="sink">
                <circle cx="0" cy="0" r="10"/>
                <g style="stroke: none; fill: black">
                    <circle cx="-9" cy="-10" r="2"/>
                    <circle cx="-15" cy="-10" r="2"/>
                    <circle cx="-21" cy="-10" r="2"/>
                </g>
            </g>
            <g id="item">
                <circle cx="0" cy="-10" r="3" style="fill: brown; stroke: none"/>
                <line x1="0" y1="10" x2="0" y2="-5" style="stroke: brown; stroke-width: 5"/>
            </g>
            <g id="items">
                <circle cx="0" cy="-10" r="3" style="fill: brown; stroke: none"/>
                <line x1="0" y1="10" x2="0" y2="-5" style="stroke: brown; stroke-width: 5"/>
                <g style="stroke: none; fill: brown">
                    <circle cx="6" cy="10" r="2"/>
                    <circle cx="12" cy="10" r="2"/>
                    <circle cx="18" cy="10" r="2"/>
                </g>
            </g>
            <g id="items2">
                <circle cx="0" cy="-10" r="3" style="fill: blue; stroke: none"/>
                <line x1="0" y1="10" x2="0" y2="-5" style="stroke: blue; stroke-width: 5"/>
                <g style="stroke: none; fill: blue">
                    <circle cx="6" cy="10" r="2"/>
                    <circle cx="12" cy="10" r="2"/>
                    <circle cx="18" cy="10" r="2"/>
                </g>
            </g>
            <g id="ok">
                <path d="M-8 0 L 0 8 L 16 -8" style="stroke: green; stroke-width: 5"/>
            </g>
            <g id="oks">
                <path d="M-8 0 L 0 8 L 16 -8" style="stroke: green; stroke-width: 5"/>
                <g style="stroke: none; fill: green">
                    <circle cx="9" cy="10" r="2"/>
                    <circle cx="15" cy="10" r="2"/>
                    <circle cx="21" cy="10" r="2"/>
                </g>
            </g>
            <g id="fail">
                <g style="stroke: red; stroke-width: 5">
                    <path d="M-10 -10 L 10 10"/>
                    <path d="M10 -10 L -10 10"/>
                </g>
            </g>
            <g id="fails">
                <g style="stroke: red; stroke-width: 5">
                    <path d="M-10 -10 L 10 10"/>
                    <path d="M10 -10 L -10 10"/>
                </g>
                <g style="stroke: none; fill: red">
                    <circle cx="9" cy="10" r="2"/>
                    <circle cx="15" cy="10" r="2"/>
                    <circle cx="21" cy="10" r="2"/>
                </g>
            </g>
            <g id="pending">
                <circle cx="0" cy="0" r="10" style="stroke: none; fill: orange">
            </g>
            <g id="hide-result">
                <rect x="-20" y="-20" width="40" height="40" style="fill: white; stroke: none"/>
            </g>
            <g id="transform">
                <path d="M0 0 l -20 -20 v 10 h -30 v 20 h 30 v 10 z"/>
            </g>
            <g id="ok2">
                <path d="M-8 0 L 0 8 L 16 -8" style="stroke: blue; stroke-width: 5"/>
            </g>
            <g id="oks2">
                <path d="M-8 0 L 0 8 L 16 -8" style="stroke: blue; stroke-width: 5"/>
                <g style="stroke: none; fill: blue">
                    <circle cx="9" cy="10" r="2"/>
                    <circle cx="15" cy="10" r="2"/>
                    <circle cx="21" cy="10" r="2"/>
                </g>
            </g>
            <g id="fail2">
                <g style="stroke: blue; stroke-width: 5">
                    <path d="M-10 -10 L 10 10"/>
                    <path d="M10 -10 L -10 10"/>
                </g>
            </g>
            <g id="fails2">
                <g style="stroke: blue; stroke-width: 5">
                    <path d="M-10 -10 L 10 10"/>
                    <path d="M10 -10 L -10 10"/>
                </g>
                <g style="stroke: none; fill: blue">
                    <circle cx="9" cy="10" r="2"/>
                    <circle cx="15" cy="10" r="2"/>
                    <circle cx="21" cy="10" r="2"/>
                </g>
            </g>
            <g id="ok1fail2">
                <g transform="translate(0,-10)">
                    <path d="M-8 0 L 0 8 L 16 -8" style="stroke: green; stroke-width: 5"/>
                </g>
                <g transform="translate(0,10)" style="stroke: blue; stroke-width: 5">
                    <path d="M-10 -10 L 10 10"/>
                    <path d="M10 -10 L -10 10"/>
                </g>
            </g>
            <g id="ok1fail2s">
                <g transform="translate(0,-10)">
                    <path d="M-8 0 L 0 8 L 16 -8" style="stroke: green; stroke-width: 5"/>
                </g>
                <g transform="translate(0,10)" style="stroke: blue; stroke-width: 5">
                    <path d="M-10 -10 L 10 10"/>
                    <path d="M10 -10 L -10 10"/>
                </g>
                <g style="stroke: none; fill: green">
                    <circle cx="9" cy="0" r="2"/>
                    <circle cx="15" cy="0" r="2"/>
                    <circle cx="21" cy="0" r="2"/>
                </g>
                <g style="stroke: none; fill: blue">
                    <circle cx="9" cy="20" r="2"/>
                    <circle cx="15" cy="20" r="2"/>
                    <circle cx="21" cy="20" r="2"/>
                </g>
            </g>
            <g id="ok2fail1">
                <g transform="translate(0,-10)">
                    <path d="M-8 0 L 0 8 L 16 -8" style="stroke: blue; stroke-width: 5"/>
                </g>
                <g transform="translate(0,10)" style="stroke: red; stroke-width: 5">
                    <path d="M-10 -10 L 10 10"/>
                    <path d="M10 -10 L -10 10"/>
                </g>
            </g>
            <g id="ok2fail1s">
                <g transform="translate(0,-10)">
                    <path d="M-8 0 L 0 8 L 16 -8" style="stroke: blue; stroke-width: 5"/>
                </g>
                <g transform="translate(0,10)" style="stroke: red; stroke-width: 5">
                    <path d="M-10 -10 L 10 10"/>
                    <path d="M10 -10 L -10 10"/>
                </g>
                <g style="stroke: none; fill: blue">
                    <circle cx="9" cy="0" r="2"/>
                    <circle cx="15" cy="0" r="2"/>
                    <circle cx="21" cy="0" r="2"/>
                </g>
                <g style="stroke: none; fill: red">
                    <circle cx="9" cy="20" r="2"/>
                    <circle cx="15" cy="20" r="2"/>
                    <circle cx="21" cy="20" r="2"/>
                </g>
            </g>
            <g id="results">
                <g transform="translate(0,-10)">
                    <path d="M-8 0 L 0 8 L 16 -8" style="stroke: green; stroke-width: 5"/>
                </g>
                <g transform="translate(0,10)" style="stroke: red; stroke-width: 5">
                    <path d="M-10 -10 L 10 10"/>
                    <path d="M10 -10 L -10 10"/>
                </g>
                <g style="stroke: none; fill: green">
                    <circle cx="9" cy="0" r="2"/>
                    <circle cx="15" cy="0" r="2"/>
                    <circle cx="21" cy="0" r="2"/>
                </g>
                <g style="stroke: none; fill: red">
                    <circle cx="9" cy="20" r="2"/>
                    <circle cx="15" cy="20" r="2"/>
                    <circle cx="21" cy="20" r="2"/>
                </g>
            </g>
            <g id="result2">
                <g transform="translate(0,-10)">
                    <path d="M-8 0 L 0 8 L 16 -8" style="stroke: blue; stroke-width: 5"/>
                </g>
                <g transform="translate(0,10)" style="stroke: blue; stroke-width: 5">
                    <path d="M-10 -10 L 10 10"/>
                    <path d="M10 -10 L -10 10"/>
                </g>
            </g>
            <g id="results2">
                <g transform="translate(0,-10)">
                    <path d="M-8 0 L 0 8 L 16 -8" style="stroke: blue; stroke-width: 5"/>
                </g>
                <g transform="translate(0,10)" style="stroke: blue; stroke-width: 5">
                    <path d="M-10 -10 L 10 10"/>
                    <path d="M10 -10 L -10 10"/>
                </g>
                <g style="stroke: none; fill: blue">
                    <circle cx="9" cy="0" r="2"/>
                    <circle cx="15" cy="0" r="2"/>
                    <circle cx="21" cy="0" r="2"/>
                </g>
                <g style="stroke: none; fill: blue">
                    <circle cx="9" cy="20" r="2"/>
                    <circle cx="15" cy="20" r="2"/>
                    <circle cx="21" cy="20" r="2"/>
                </g>
            </g>
            <g id="equals">
                <g style="stroke: gray; stroke-width: 10">
                    <line x1="-20" y1="-10" x2="20" y2="-10"/>
                    <line x1="-20" y1="10" x2="20" y2="10"/>
                </g>
            </g>
        </defs>

        <g
            transform="translate(50, 0)"
            style="fill: none; stroke: black; stroke-width: 3"
            >
            <g class="slide-step-2">
                <use xlink:href="#items" x="230" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(310,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="340" y="25"/>
            </g>
            <g class="slide-step-3">
                <use xlink:href="#transform" x="200" y="25"/>
            </g>
            <g class="slide-step-4">
                <use xlink:href="#items2" x="120" y="25"/>
            </g>

            <g class="slide-step-5">
                <use xlink:href="#equals" x="440" y="25"/>
                <use xlink:href="#items2" x="520" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(600,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="630" y="25"/>
            </g>
        </g>
    </svg>

    <pre class="slide-step-6"><code>with</code></pre>
    <svg style="width: 20%" viewBox="-100 0 1000 50">
        <g
            transform="translate(50, 0)"
            style="fill: none; stroke: black; stroke-width: 3"
            >
            <g class="slide-step-7">
                <use xlink:href="#items" x="230" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(310,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="340" y="25"/>
            </g>
            <g class="slide-step-8">
                <use xlink:href="#transform" x="90" y="25"/>
            </g>
            <g class="slide-step-9">
                <use xlink:href="#items2" x="0" y="25"/>
                <use xlink:href="#future" style="stroke: blue" x="120" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(200,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
            </g>

            <g class="slide-step-10">
                <use xlink:href="#equals" x="440" y="25"/>
                <use xlink:href="#items2" x="520" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(600,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="630" y="25"/>
            </g>
        </g>
    </svg>

    <pre class="slide-step-11"><code>with_flat_map</code></pre>
    <svg style="width: 20%" viewBox="-100 0 1000 50">
        <g
            transform="translate(50, 0)"
            style="fill: none; stroke: black; stroke-width: 3"
            >
            <g class="slide-step-12">
                <use xlink:href="#items" x="230" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(310,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="340" y="25"/>
            </g>
            <g class="slide-step-13">
                <use xlink:href="#transform" x="90" y="25"/>
            </g>
            <g class="slide-step-14">
                <use xlink:href="#items2" x="0" y="25"/>
                <use xlink:href="#stream" style="stroke: blue" x="120" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(200,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
            </g>

            <g class="slide-step-15">
                <use xlink:href="#equals" x="440" y="25"/>
                <use xlink:href="#items2" x="520" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(600,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="630" y="25"/>
            </g>
        </g>
    </svg>

    <pre class="slide-step-16"><code>fanout</code></pre>
    <svg style="width: 20%" viewBox="-100 0 1000 100">
        <g
            transform="translate(50, 0)"
            style="fill: none; stroke: black; stroke-width: 3"
            >
            <g class="slide-step-17">
                <use xlink:href="#items" x="230" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(310,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="340" y="25"/>
            </g>
            <g class="slide-step-18">
                <use xlink:href="#items" x="230" y="75"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(310,75)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="340" y="75"/>
            </g>
            <g class="slide-step-19">
                <use xlink:href="#items" style="stroke: brown" x="120" y="50"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(200,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <path d="M0 0 h-25 v25 h-25"/>
                </g>
                <g
                    style="stroke-width: 4"
                    transform="translate(200,75)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <path d="M0 0 h-25 v-25"/>
                </g>
            </g>

            <g class="slide-step-20">
                <use xlink:href="#equals" x="440" y="50"/>
                <use xlink:href="#items" x="520" y="50"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(600,50)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="630" y="50"/>
            </g>
        </g>
    </svg>

    <pre class="slide-step-21"><code>flush</code></pre>
    <svg style="width: 20%" viewBox="-100 0 1000 50">
        <g
            transform="translate(50, 0)"
            style="fill: none; stroke: black; stroke-width: 3"
            >
            <g class="slide-step-22">
                <use xlink:href="#sink" x="120" y="25"/>
            </g>
            <g class="slide-step-23">
                <g
                    style="stroke-width: 4"
                    transform="translate(200,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#future" style="stroke: blue" x="230" y="25"/>
            </g>
            <g class="slide-step-24">
                <g
                    style="stroke-width: 4"
                    transform="translate(310,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="340" y="25"/>
            </g>

            <g class="slide-step-25">
                <use xlink:href="#equals" x="440" y="25"/>
                <use xlink:href="#future" x="520" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(600,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="630" y="25"/>
            </g>
        </g>
    </svg>

    <pre class="slide-step-26"><code>send</code></pre>
    <svg style="width: 20%" viewBox="-100 0 1000 50">
        <g
            transform="translate(50, 0)"
            style="fill: none; stroke: black; stroke-width: 3"
            >
            <g class="slide-step-27">
                <use xlink:href="#sink" x="120" y="25"/>
            </g>
            <g class="slide-step-28">
                <use xlink:href="#item" x="0" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(80,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
            </g>
            <g class="slide-step-29">
                <g
                    style="stroke-width: 4"
                    transform="translate(200,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#future" x="230" y="25"/>
            </g>
            <g class="slide-step-30">
                <g
                    style="stroke-width: 4"
                    transform="translate(310,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="340" y="25"/>
            </g>

            <g class="slide-step-31">
                <use xlink:href="#equals" x="440" y="25"/>
                <use xlink:href="#future" x="520" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(600,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="630" y="25"/>
            </g>
        </g>
    </svg>

    <pre class="slide-step-32"><code>send_all</code></pre>
    <svg style="width: 20%" viewBox="-100 0 1000 50">
        <g
            transform="translate(50, 0)"
            style="fill: none; stroke: black; stroke-width: 3"
            >
            <g class="slide-step-33">
                <use xlink:href="#sink" x="120" y="25"/>
            </g>
            <g class="slide-step-34">
                <use xlink:href="#stream" x="-110" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(-20,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#items" x="0" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(80,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
            </g>
            <g class="slide-step-35">
                <g
                    style="stroke-width: 4"
                    transform="translate(200,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#future" x="230" y="25"/>
            </g>
            <g class="slide-step-36">
                <g
                    style="stroke-width: 4"
                    transform="translate(310,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="340" y="25"/>
            </g>

            <g class="slide-step-37">
                <use xlink:href="#equals" x="440" y="25"/>
                <use xlink:href="#future" x="520" y="25"/>
                <g
                    style="stroke-width: 4"
                    transform="translate(600,25)"
                    >
                    <use xlink:href="#mini-arrow-head" x="0" y="0"/>
                    <line x1="0" y1="0" x2="-50" y2="0"/>
                </g>
                <use xlink:href="#sink" x="630" y="25"/>
            </g>
        </g>
    </svg>
</div>
